\clearpage
# Figures

## Data 
<!-- ====================================================================== --> 
<!-- *******************    Assessment Map      *************************** --> 
<!-- ====================================================================== --> 


```{r, data-plot, results = "asis"}
sa4ss::add_figure(
filein = file.path(mod_loc_relative, "plots", "data_plot2.png"), 
caption = 
  "Data presence by year for each fleet, where circle area is
relative within a data type. Circles are proportional to
total catch for catches; to precision for indices, discards, and
mean body weight observations; and to total sample size for
compositions.",
label = "data-plot"
)
```

<!-- ====================================================================== -->  
<!-- ****************** Catches Used in the Model ************************* --> 
<!-- ====================================================================== -->  

## Catch and estimated discards

```{r, catch-figures-r4ss, results = "asis"}
sa4ss::add_figure(
filein = file.path(mod_loc_relative, "plots", "catch2 landings stacked.png"), 
caption = "Landings (mt) by fleet used in the base model.",
label = "catch-figures-r4ss"
)

sa4ss::add_figure(
filein = file.path(mod_loc_relative, "plots", "catch16 landings + dead discards.png"), 
caption = "Landings plus dead discards (mt) by fleet as estimated in the base model.",
label = "catchdiscard-figures-r4ss"
)

```

<!-- ====================================================================== --> 
<!-- ******************* Data Used in the Model *************************** --> 
<!-- ====================================================================== --> 


## Biology


## Model Results

### Bridging


### Model Structure


### Estimated Biology
```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc_relative, "plots", "bio1_sizeatage.png"),
caption = "Model estimated length-at-age in the beginning of the year. Shaded area indicates 95 percent distribution of length-at-age around the estimated growth curve",
label = 'mod-est-len-age')
```

```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc_relative, "plots", "bio3_sizeatage_plus_WT_and_MAT.png"),
caption = "Relationship between growth, maturity, and weight. Length at age is in the top-left panel with weight (thick lines) and maturity (thin lines) shown in top-right and lower-left panels",
label = 'mod-est-len-age2')

add_figure(
filein = file.path("../figures/Petrale_fxn_ogive.png"),
caption = "Maturity ogive showing fit to observed fraction mature within each length bin.",
label = 'maturity')
```


### Selectivity
```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc_relative, "plots",  "sel01_multiple_fleets_length1.png"), 
caption = paste("Selectivity at length for multiple fleets.",
  "Solid lines are female selectivity, dashed are male."),
label = 'sel_length')

add_figure(
filein = file.path(mod_loc_relative, "plots",  "sel02_multiple_fleets_age2.png"), 
caption = paste("Ending-year selectivity at age derived from selectivity at length",
  "(solid female, dashed male)."),
label = 'sel-age')

add_figure(
filein = file.path(mod_loc_relative, "plots",  "sel02_multiple_fleets_age2.png"), 
caption = paste("Selectivity at age derived from selectivity at length",
  "(solid female, dashed male)."),
label = 'sel-length')

add_figure(
filein = file.path(mod_loc_relative, "custom_plots",  "selectivity_time-varying_fem.png"), 
caption = paste("Time-varying female selectivity (top) and retention (bottom)",
  "for the fishing fleets. Retention is the same for females and males."),
label = 'sel-tv-fem')

add_figure(
filein = file.path(mod_loc_relative, "custom_plots",  "selectivity_time-varying_mal.png"), 
caption = paste("Time-varying male selectivity (top) and retention (bottom)",
  "for the fishing fleets. Retention is the same for females and males."),
label = 'sel-tv-mal')

```



### Recruitment


### Fits to Data

### Fits to Data
#### Fits to indices
```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc_relative, "plots",  "index2_cpuefit_WCGBTS.png"), 
caption = paste("Fit to index data for WCGBTS. Lines indicate 95% uncertainty",
  "interval around index values based on the model assumption of lognormal error."),
label = 'index-wcgbts-fit')

add_figure(
filein = file.path(mod_loc_relative, "plots",  "index2_cpuefit_Triennial.png"), 
caption = paste("Fit to index data for the Triennial survey. Lines indicate 95% uncertainty",
  "interval around index values based on the model assumption of lognormal error.",
  "Thicker lines indicate input uncertainty before addition of",
  "estimated additional uncertainty parameter."),
label = 'index-tri-fit')
```

#### Fits to Length and Age Compositions
<!-- TODO: add Francis plots -->
```{r, results = 'asis'}
add_figure(
filein = file.path(mod_loc_relative, "plots",  "comp_lenfit__aggregated_across_time.png"), 
caption = paste("Length composition aggregated across years by fleet with the",
  "model estimated fit to the data by sex (red female and blue male)."),
label = 'len-agg-fit')

add_figure(
filein = file.path(mod_loc_relative, "plots",  "comp_lenfit__multi-fleet_comparison.png"), 
caption = paste("Pearson residuals for fit to length composition data for all fleets",
  "(red female, blue male, grey unsexed).",
  "Closed bubbles are positive residuals (observed > expected) and open bubbles",
  "are negative residuals (observed < expected)."),
label = 'len-all-pearson')

add_figure(
filein = file.path(mod_loc_relative, "plots",  "comp_agefit__multi-fleet_comparison.png"), 
caption = paste("Pearson residuals for fit to age composition data for all fleets",
  "(red female, blue male).",
  "Closed bubbles are positive residuals (observed > expected) and open bubbles",
  "are negative residuals (observed < expected)."),
label = 'age-all-pearson')

add_figure(
filein = file.path(mod_loc_relative, "plots", "comp_agefit__aggregated_across_time.png"), 
caption = "Age composition data aggregated across time by fleet and sex (red female and blue male).",
label = 'agg-marg-age-fit')

add_figure(
filein = file.path(mod_loc_relative, "plots", "comp_condAALfit_residsflt4mkt0_page1.png"), 
caption = "Pearson residuals for conditional age-at-length data from WCGBTS (plot 1 of 2)",
label = 'agg-caal-fit1')

add_figure(
filein = file.path(mod_loc_relative, "plots", "comp_condAALfit_residsflt4mkt0_page2.png"), 
caption = "Pearson residuals for conditional age-at-length data from WCGBTS (plot 2 of 2)",
label = 'agg-caal-fit2')

```

### Time-series


### Sensitivity Analyses and Retrospectives


### Likelihood Profiles


### Reference Points and Forecasts